
## 思考题：假设你来设计一个日活跃用户 1000 万的论坛的负载均衡集群，你的方案是什么？设计理由是什么？

- nginx大概5w/s
- LVS大概10w/s
- F5的性能是百万级别，从200w～800w

先使用DNS负载均衡，把流量分到不同的区域，然后在用nginx去做负载均衡。

评论区：
1.  流量评估
    + 1000W DAU转换为秒级是116
    + 每个用户的平均操作是10， QPS=1160
    + 峰值是均值的10倍，QPS=11600
    + 静态资源、图片资源、服务拆分等流量放大效应，假定为10，QPS=116000
2. 容量规划
    + 考虑到高可用，异地多活QPS*2=232000
    + 未来半年的用户增长 QPS*1.5=348000
3. 方案设计（三级导流）
    + DNS确定机房
    + 确定集群，扩展优先，则选Haproxy/LVS，稳定优先则选F5。
    + Nginx+KeepAlived，确定实例。



