## 思考题： RocketMQ 和 Kafka 有什么区别，阿里为何选择了自己开发 RocketMQ？
|区别|kafka| RocketMQ |
|--|--|--|
|适用场景|日志处理|业务处理|
|性能|单机写入TPS号称在百万条/秒|大约在10万条/秒|
|可靠性|使用异步刷盘方式，异步Replication|支持异步/同步刷盘;异步/同步Replication|
|实时性|均支持pull长轮询|均支持pull长轮询，RocketMQ消息实时性更好|
|支持的队列数|单机超过64个队列/分区，消息发送性能降低严重|RocketMQ单机支持最高5万个队列，性能稳定（这也是适合业务处理的原因之一）|
|消息顺序|支持消息顺序，但是一台Broker宕机后，就会产生消息乱序|支持严格的消息顺序，在顺序消息场景下，一台Broker宕机后，发送消息会失败，但是不会乱序|
|消费失败重试机制|消费失败不支持重试|消费失败支持定时重试，每次重试间隔时间顺延|
|定时消息|不支持|支持|
|分布式事务消息|不支持|阿里云ONS支持分布式定时消息，未来开源版本的RocketMQ也有计划支持分布式事务消息|
|消息查询机制|不支持|支持根据Message Id查询消息，也支持根据消息内容查询消息（发送消息时指定一个Message Key，任意字符串，例如指定为订单Id）|
|消息回溯|可以按照Offset来回溯消息|支持按照时间来回溯消息，精度毫秒，例如从一天之前的某时某分某秒开始重新消费消息|


为什么阿里要自研RocketMQ，主要是因为kfaka针对海量数据但是对数据的正确度要求不是十分严格，而阿里巴巴中用于交易相关的事情较多，对数据的正确性要求极高，Kafka不合适，然后就自研了RocketMQ。


## 总结
**列出我们需要关注的质量属性点，然后分别从这些质量属性的维度去评估每个方案，再综合挑选适合当时情况的最优方案**


备选方案要从多个方面考量：
- 性能
- 可用性
- 硬件成本
- 项目投入
- 复杂度
- 安全性
- 可扩展性

根据架构设计原则去考虑他们。

