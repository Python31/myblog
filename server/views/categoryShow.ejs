<h1 class="page-header">文章分类</h1>
<div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading"></div>

    <!-- Table -->
    <table class="table syl-table">
        <thead>
        <tr>
            <th>#</th>
            <th>ID</th>
            <th>分类名称</th>
            <th>文章总数</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <%var categoryLen = categoryList.length%>
        <% for(var i=0;i<categoryLen;i++){%>
        <tr>
            <td><%=i%></td>
            <td><%=categoryList[i].id%></td>
            <td><%=categoryList[i].name%></td>
            <td><%=categoryList[i].list.length%></td>
            <td class="delParent">
                <button type="button" data="<%=categoryList[i].id%>"  class="btn btn-danger delCategory">删除</button>
                <a href="/admin/category/detail/<%=categoryList[i].id%>" type="button"  class="btn btn-info">查看文章</a>
            </td>
        </tr>
        <%}%>

        </tbody>
    </table>
</div>
<script>
    $(".delParent").click(function(){
        var ev  = ev || window.event,
           target = ev.target || ev.srcElement,
            delBtn = $(target);

        if(!delBtn.attr("data")) return ;
        if(confirm("确信要删除么")){
            $.get("/admin/category/del/"+delBtn.attr("data"),function(res){
                if(1!=res){
                    alert("删除失败请联系管理员");
                }else {
                    location.href  = "/admin/category/show";
                }
            })
        }


    });
</script>
